<!DOCTYPE html>
<html>
    <body style="background-color: gray">
        <div id="status"></div>
        <div id="items" style="position: absolute; top: 7px; left: 500px"></div>
        <div id="village"></div>
        <script type="text/javascript">
            var item_div = document.getElementById("items");
            var items = [];
            item_div.innerHTML = "<b>Items:</b><br/>";
        </script>
        <script type="text/javascript">
            var div = document.getElementById("status");
            var below_div = document.getElementById("village");
            var has_searched_room = false;
            var has_searched_kitchen = false;
            var has_fed_birds = false;
            wake();
            function wake() {
                div.textContent = "You are asleep.";
                below_div.innerHTML = '<button onclick="woken()">Wake up</button>';
            }
            function woken() {
                div.textContent = "You feel drowsy.";
                below_div.innerHTML = '<button onclick="downstairs()">Go downstairs</button><br/><button onclick="search_bedroom_protection()">Search your room</button>';
            }
            function downstairs() {
                if (!has_searched_kitchen) {
                    div.textContent = "You are slightly hungry.";
                } else {
                    div.textContent = "You want to go outside.";
                }
                below_div.innerHTML = '<button onclick="outside()">Go outside</button><br/><button onclick="search_kitchen()">Search the kitchen</button><br/><button onclick="search_bedroom()">Go to your room</button>';
            }
            function search_bedroom() {
                if (!has_searched_room) {
                    div.textContent = "You feel drowsy.";
                } else {
                    div.textContent = "You have a longing to see your daughter.";
                }
                below_div.innerHTML = '<button onclick="downstairs()">Go downstairs</button><br/>';
                if (!has_searched_room) {
                    below_div.innerHTML += '<button onclick="search_bedroom_protection()">Search your room</button>';
                }
            }
            function search_bedroom_protection() {
                if (!has_searched_room) {
                    has_searched_room = !has_searched_room;
                    item_div.innerHTML += "Coins: 5<br/>";
                    items[items.length + 1] = "Coins";
                    below_div.innerHTML = '<button onclick="downstairs()">Go downstairs</button><br/>You find some coins.';
                }
            }
            function outside() {
                div.textContent = "You need to visit the blacksmith.";
                below_div.innerHTML = '<button onclick="clear_blacksmith()">Go to the blacksmith</button><br/><button onclick="downstairs()">Go to your house</button><br/><button onclick="feed_birds">Feed the birds</button>';
            }
            function search_kitchen() {
                if (!has_searched_kitchen) {
                    has_searched_kitchen = !has_searched_kitchen;
                    item_div.innerHTML += "Seeds: 3<br/>";
                    items[items.length + 1] = "Seeds"
                    below_div.innerHTML = '<button onclick="outside()">Go outside</button><br/><button onclick="search_bedroom()">Go to your room</button><br/>You find some seeds and an apple.<br/>You eat the apple.';
                    div.textContent = "You are no longer hungry.";
                } else {
                    below_div.innerHTML = '<button onclick="outside()">Go outside</button><br/><button onclick="search_bedroom()">Go to your room</button><br/>You don\'t find anything.';
                }
            }
            function sword_blacksmith() {
                below_div = '<button onclick="outside()">Go outside</button><br/><br/><b>Shop:</b><br/><button onclick="clear_blacksmith()">Buy a sword</button>';
                if (!has_fed_birds) {
                    below_div += " 5 coins";
                } else {
                    below_div += " 3 coins<br/><br/><b>Blacksmith:</b> I saw you feed the birds, I always give discounts to kind folks.";
                }
            }
            function clear_blacksmith() {
                var sword = false;
                for (var item in items) {
                    if (item == "Sword") {
                        sword = true;
                    }
                }
                if (sword) {
                    below_div = '<button onclick="outside()">Go outside</button><br/><br/><b>Blacksmith:</b> I have nothing to sell you right now.';
                } else {
                    sword_blacksmith();
                }
            }
        </script>
        <div id="forest">
            <div id="river"></div>
            <div id="wraiths"></div>
        </div>
        <div id="grasslands">
            <div id="valley"></div>
            <div id="bandits"></div>
        </div>
        <div id="mountains">
            <div id="landslide"></div>
            <div id="wolves"></div>
        </div>
        <div id="peaks">
            <div id="snowstorm"></div>
        </div>
        <div id="castle">
            <div id="enterance"></div>
            <div id="dungeon"></div>
            <div id="tower"></div>
        </div>
        <div id="boss">
            <div id="vampire"></div>
            <div id="bandit_leader"></div>
            <div id="alpha_male"></div>
            <div id="dragon"></div>
            <div id="witch"></div>
        </div>
    </body>
</html>
