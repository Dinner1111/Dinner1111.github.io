<!DOCTYPE html>
<html>
    <body style="background-color: gray">
        <div><b>Status:</b>
        <div style="position: absolute; top: 320px"><b>Info:</b></div>
        <div id="status" style="position: absolute; top: 8px; left: 60px"></div>
        <div id="items" style="position: absolute; top: 8px; left: 500px"></div>
        <div id="text" style="position: absolute; top: 300px"></div>
        <div id="village"></div>
        <script type="text/javascript">
            var item_div = document.getElementById("items");
            item_div.innerHTML = "<b>Items:</b><br/>";
            var items = [" ", " ", " ", " ", " "];
        </script>
        <script type="text/javascript">
            function update_items() {
                var result = "<b>Items:</b><br/>";
                for (var index = 0; index < items.length; index++) {
                    if (items[index] === " ") {
                        continue;
                    } else {
                        result += items[index] + "<br/>";
                    }
                }
                item_div.innerHTML = result;
            }
        </script>
        <script type="text/javascript">
            var div = document.getElementById("status");
            var below_div = document.getElementById("village");
            var text_div = document.getElementById("text");
            function remove_info_text() {
                text_div.textContent = " ";
            }
        </script>
        <script type="text/javascript">
            var has_searched_room = false;
            var has_searched_kitchen = false;
            var has_fed_birds = false;
            var has_sword = false;
            wake();
            function wake() {
                div.textContent = "You are asleep.";
                below_div.innerHTML = '<button onclick="woken()">Wake up</button>';
            }
            function woken() {
                div.textContent = "You feel drowsy.";
                below_div.innerHTML = '<button onclick="downstairs()">Go downstairs</button><br/><button onclick="search_bedroom_protection()">Search your room</button>';
            }
            function downstairs() {
                remove_info_text();
                if (!has_searched_kitchen) {
                    div.textContent = "You are slightly hungry.";
                } else {
                    div.textContent = "You want to go outside.";
                }
                below_div.innerHTML = '<button onclick="outside()">Go outside</button><br/><button onclick="search_kitchen()">Search the kitchen</button><br/><button onclick="search_bedroom()">Go to your room</button>';
            }
            function search_bedroom() {
                if (!has_searched_room) {
                    div.textContent = "You feel drowsy.";
                } else {
                    div.textContent = "You have a longing to see your daughter.";
                }
                below_div.innerHTML = '<button onclick="downstairs()">Go downstairs</button><br/>';
                if (!has_searched_room) {
                    below_div.innerHTML += '<button onclick="search_bedroom_protection()">Search your room</button>';
                }
            }
            function search_bedroom_protection() {
                if (!has_searched_room) {
                    has_searched_room = !has_searched_room;
                    items[0] = "Coins: 5"
                    update_items();
                    below_div.innerHTML = '<button onclick="downstairs()">Go downstairs</button>';
                    text_div.innerHTML = '<br/><br/>You find some coins.'
                }
            }
            function outside() {
                div.textContent = "You need to visit the blacksmith.";
                below_div.innerHTML = '<button onclick="clear_blacksmith()">Go to the blacksmith</button><br/><button onclick="downstairs()">Go to your house</button><br/><button onclick="feed_birds()">Feed the birds</button>';
                if (has_fed_birds) {
                    below_div.innerHTML = below_div.innerHTML.substring(0, below_div.innerHTML.length - 54);
                }
            }
            function search_kitchen() {
                if (!has_searched_kitchen) {
                    has_searched_kitchen = !has_searched_kitchen;
                    items[1] = "Seeds: 3";
                    update_items();
                    below_div.innerHTML = '<button onclick="outside()">Go outside</button><br/><button onclick="search_bedroom()">Go to your room</button><br/>You find some seeds and an apple.<br/>You eat the apple.';
                    text_div.innerHTML = '<br/><br/>You find some seeds and an apple.<br/>You eat the apple.';
                    div.textContent = "You are no longer hungry.";
                } else {
                    below_div.innerHTML = '<button onclick="outside()">Go outside</button><br/><button onclick="search_bedroom()">Go to your room</button>';
                    text_div.innerHTML = '<br/><br/>You don\'t find anything.';
                }
            }
            function sword_blacksmith() {
                if (!has_sword) {
                    div.textContent = "You need a sword.";
                } else {
                    div.textContent = "You want to go outside.";
                }
                below_div.innerHTML = '<button onclick="outside(), remove_info_text()">Go outside</button><br/><br/><b>Shop:</b><br/><button onclick="buy_sword()">Buy a sword</button>';
                if (!has_fed_birds) {
                    below_div.innerHTML += ' 5 coins';
                } else {
                    below_div.innerHTML += ' 3 coins';
                    text_div.innerHTML = '<br/><br/><b>Blacksmith:</b> I saw you feed the birds, I always give discounts to kind folks.';
                }
            }
            function clear_blacksmith() {
                remove_info_text();
                if (has_sword) {
                    below_div.innerHTML = '<button onclick="outside(), remove_info_text()">Go outside</button>';
                    text_div.innerHTML = '<br/><br/><b>Blacksmith:</b> I have nothing to sell you right now.';
                } else {
                    sword_blacksmith();
                }
            }
            function buy_sword() {
                if (items[0] === "Coins: 5") {
                    if (has_fed_birds) {
                        items[0] = "Coins: 2";
                    } else {
                        items[0] = " ";
                    }
                    items[2] = "Sword";
                    update_items();
                    has_sword = true;
                    div.textContent = "You want to go outside.";
                    text_div.innerHTML = '<br/><br/><b>Blacksmith:</b> Thanks for the business!';
                } else {
                    text_div.innerHTML = '<br/><br/><b>Blacksmith:</b> Sorry pal, but you need more coins for that.';
                }
            }
            function feed_birds() {
                if (items[1] === "Seeds: 3") {
                    below_div.innerHTML = '<button onclick="clear_blacksmith(), remove_info_text()">Go to the blacksmith</button><br/><button onclick="downstairs(), remove_info_text()">Go to your house</button>';
                    text_div.innerHTML = '<br/><br/>You think of your daughter as you toss your seeds to some birds.';
                    has_fed_birds = true;
                    items[1] = " ";
                    update_items();
                } else {
                    text_div.innerHTML = '<br/><br/>You don\'t have any food to feed the birds.';
                }
            }
        </script>
        <div id="forest">
            <div id="river"></div>
            <div id="wraiths"></div>
        </div>
        <div id="grasslands">
            <div id="valley"></div>
            <div id="bandits"></div>
        </div>
        <div id="mountains">
            <div id="landslide"></div>
            <div id="wolves"></div>
        </div>
        <div id="peaks">
            <div id="snowstorm"></div>
        </div>
        <div id="castle">
            <div id="enterance"></div>
            <div id="dungeon"></div>
            <div id="tower"></div>
        </div>
        <div id="boss">
            <div id="vampire"></div>
            <div id="bandit_leader"></div>
            <div id="alpha_male"></div>
            <div id="dragon"></div>
            <div id="witch"></div>
        </div>
    </body>
</html>
